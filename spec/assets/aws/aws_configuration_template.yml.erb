---
aws:
  secret_access_key: <%= ENV["BOSH_AWS_SECRET_ACCESS_KEY"] || raise("Missing ENV variable BOSH_AWS_SECRET_ACCESS_KEY") %>
  access_key_id: <%= ENV["BOSH_AWS_ACCESS_KEY_ID"] || raise("Missing ENV variable BOSH_AWS_ACCESS_KEY_ID") %>
  region: us-east-1
name: <%= ENV["BOSH_VPC_SUBDOMAIN"]  || raise("Missing ENV variable BOSH_VPC_SUBDOMAIN") %>
vpc:
  domain: <%= ENV["BOSH_VPC_SUBDOMAIN"] %>.cf-app.com
  instance_tenancy: default
  cidr: 10.10.0.0/16
  subnets:
    bosh:
      cidr: 10.10.0.0/24
      availability_zone: us-east-1d
  dhcp_options:
    domain_name_servers:
      - 10.10.0.5  # IP of the BOSH DNS server?
      - 10.10.0.2  # local amazon public DNS server
  security_groups:
    - name: bosh
      ingress:
        - protocol: tcp
          ports: '0 - 65535'
          sources: 0.0.0.0/0
        - protocol: udp
          ports: '0 - 65535'
          sources: 0.0.0.0/0
    - name: bat
      ingress:
        - protocol: tcp
          ports: '4567'
          sources: 0.0.0.0/0
        - protocol: tcp
          ports: '22'
          sources: 0.0.0.0/0
    - name: cf
      ingress:
        - protocol: tcp
          ports: '0 - 65535'
          sources: 0.0.0.0/0
        - protocol: udp
          ports: '0 - 65535'
          sources: 0.0.0.0/0
elastic_ips:
  router:
    instances: 1
    dns_record: "*"
    ttl: 60
  micro:
    instances: 1
    dns_record: "micro"
    ttl: 60
  bat:
    instances: 1
    dns_record: "bat"
    ttl: 60
  bosh:
    instances: 1
    dns_record: bosh
    ttl: 60

key_pairs:
  <%= ENV["BOSH_KEY_PAIR_NAME"] || "bosh" %>: <%= ENV["BOSH_KEY_PATH"] || "#{ENV["HOME"]}/.ssh/id_bosh_rsa" %>

s3:
  - bucket_name: <%= (ENV["BOSH_VPC_SUBDOMAIN"] || raise("Missing ENV variable BOSH_VPC_SUBDOMAIN")) + "-bosh-blobstore" %>
    tag: blobstore
rds:
  - name: ccdb
    tag: cc
    # aws_creation_options:
    #   # These are passed on directly to the AWS API call.
    #   # http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/RDS/Client.html#create_db_instance-instance_method
    #   db_instance_class: db.m2.x4.large
    #   allocated_storage: 7
    #   multi_az: true
  - name: uaadb
    tag: uaa

